CREATE TABLE PERSONA 
(
	USUARIO VARCHAR(25) NOT NULL, 
	CONTRASENA VARCHAR(25) NOT NULL, 
	NOMBRE VARCHAR(25) NOT NULL, 
	APELLIDO VARCHAR(25) NOT NULL, 
	DIRECCION VARCHAR(50) NOT NULL, 
	EMAIL VARCHAR(50) NOT NULL, 
	TELEFONO NUMERIC(19,0) NOT NULL, 
	CELULAR NUMERIC(19,0) NOT NULL,
	ID_ESTADO_PERSONA VARCHAR(5) NOT NULL
);

CREATE TABLE ADMINISTRADOR
(
	USUARIO VARCHAR(25) NOT NULL,
	CEDULA_ADMI NUMERIC(19,0) NOT NULL,
	CARGO VARCHAR(25) NOT NULL,
	ID_GENERO_ADMI VARCHAR(5) NOT NULL 
);

CREATE TABLE VENDEDOR
(
	USUARIO VARCHAR(25) NOT NULL,
	CEDULA_VENDEDOR NUMERIC(19,0) NOT NULL,
	ZONA_VENDEDOR VARCHAR(5) NOT NULL,
	ID_GENERO_VENDEDOR VARCHAR(5) NOT NULL 
);

CREATE TABLE GENERO 
(
	ID_GENERO VARCHAR(5) NOT NULL, 
	DESCRIPCION_GENERO VARCHAR(25) NOT NULL
);

CREATE TABLE ZONA 
(
	ID_ZONA VARCHAR(5) NOT NULL, 
	DESCRIPCION_ZONA VARCHAR(25) NOT NULL
);

CREATE TABLE CLIENTE
(
	USUARIO VARCHAR(25) NOT NULL,
	NIT  NUMERIC(19,0) NOT NULL,
	ADMINISTRADOR NUMERIC (19,0) NOT NULL
);

CREATE TABLE ADMINISTRADOR_CLIENTE
(
	CEDULA_CLIENTE NUMERIC(19,0) NOT NULL,
	NOMBRE_CLIENTE VARCHAR(25) NOT NULL
);

CREATE TABLE ESTADO 
(
	ID_ESTADO VARCHAR(5) NOT NULL, 
	DESCRIPCION VARCHAR(25) NOT NULL
);

CREATE TABLE PEDIDO
(
	N_PEDIDO VARCHAR(10) NOT NULL, 
	CLIENTE VARCHAR(25) NOT NULL
);

CREATE TABLE PEDIDO_PRODUCTO
(
	NUMERO_PEDIDO VARCHAR(10) NOT NULL,
	COD_PRODUCTO VARCHAR(10) NOT NULL, 
	CANT_PRODUCTO DECIMAL(19,0) NOT NULL,
	FECHA DATE NOT NULL
);

CREATE TABLE FACTURA_VENTA
(
	FECHA DATE NOT NULL, 
	N_PEDIDO VARCHAR(10) NOT NULL,
	ID_ESTADO_FACT BIT NOT NULL, 
	ID_PAGO_FACT NUMERIC(19,0) NOT NULL
);

CREATE TABLE ESTADO_FACTURA
(
	ID_ESTADO_FAC BIT NOT NULL, 
	DESCRIPCION_ESTADO VARCHAR(25) NOT NULL
);

CREATE TABLE FORMA_DE_PAGO
(
	ID_PAGO NUMERIC(19,0) NOT NULL,
	DESCRIPCION_PAGO VARCHAR(25) NOT NULL
);

CREATE TABLE PRODUCTO
(
	CODIGO_PRODUCTO VARCHAR(10) NOT NULL, 
	NOMBRE_PRODUCTO VARCHAR(25) NOT NULL,
	MARCA VARCHAR(25) NOT NULL, 
	PRECIO REAL NOT NULL, 
	CARACTERISTICAS VARCHAR(255) NOT NULL, 
	IVA REAL NOT NULL,
	ID_CATEGORIA_PROD VARCHAR(10) NOT NULL,
	ID_ESTADO_PROD VARCHAR(5) NOT NULL
);

CREATE TABLE CATEGORIA 
(
	ID_CATEGORIA VARCHAR(10) NOT NULL, 
	DESCRIPCION_CATEGORIA VARCHAR(25) NOT NULL,
	ID_ESTADO_CAT VARCHAR(5) NOT NULL
);

CREATE TABLE PRODUCTO_FACTURA_COMPRA 
(
	CODIGO_PRODUCTO_FAC VARCHAR(10) NOT NULL, 
	N_FACTURA NUMERIC(19,0) NOT NULL,
	CANT_P NUMERIC(19,0) NOT NULL, 
	PNETO REAL NOT NULL, 
	IVA_COMPRA REAL NOT NULL, 
	TOTAL_COMPRA REAL NOT NULL
);

CREATE TABLE FACTURA_COMPRA 
(
	N_FACTURA NUMERIC(19,0) NOT NULL,
	FECHA DATE NOT NULL, 
	FAC_NIT_PROVEEDOR NUMERIC(19,0) NOT NULL
);

CREATE TABLE PROVEEDOR 
(
	NIT_PROVEEDOR NUMERIC(19,0) NOT NULL,
	NOMBRE_PROVEEDOR VARCHAR(25) NOT NULL, 
	TEL_PROVEEDOR NUMERIC(19,0) NOT NULL, 
	CEL_PROVEEDOR NUMERIC(19,0) NOT NULL, 
	EMAIL_PROVEEDOR VARCHAR(25) NOT NULL, 
	DIRECCION_PROVEEDOR VARCHAR(25) NOT NULL
);


ALTER TABLE `persona` ADD PRIMARY KEY(`USUARIO`);
ALTER TABLE `administrador` ADD PRIMARY KEY( `USUARIO`);
ALTER TABLE `administrador_cliente` ADD PRIMARY KEY( `CEDULA_CLIENTE`);
ALTER TABLE `categoria` ADD PRIMARY KEY( `ID_CATEGORIA`);
ALTER TABLE `cliente` ADD PRIMARY KEY( `USUARIO`);
ALTER TABLE `estado` ADD PRIMARY KEY( `ID_ESTADO`);
ALTER TABLE `estado_factura` ADD PRIMARY KEY( `ID_ESTADO_FAC`);
ALTER TABLE `factura_compra` ADD PRIMARY KEY( `N_FACTURA`);
ALTER TABLE `factura_venta` ADD PRIMARY KEY( `N_PEDIDO`);
ALTER TABLE `forma_de_pago` ADD PRIMARY KEY( `ID_PAGO`);
ALTER TABLE `genero` ADD PRIMARY KEY( `ID_GENERO`);
ALTER TABLE `pedido` ADD PRIMARY KEY( `N_PEDIDO`);
ALTER TABLE `pedido_producto` ADD PRIMARY KEY( `NUMERO_PEDIDO`, `COD_PRODUCTO`);
ALTER TABLE `producto` ADD PRIMARY KEY( `CODIGO_PRODUCTO`);
ALTER TABLE `producto_factura_compra` ADD PRIMARY KEY( `CODIGO_PRODUCTO_FAC`, `N_FACTURA`);
ALTER TABLE `proveedor` ADD PRIMARY KEY( `NIT_PROVEEDOR`);
ALTER TABLE `vendedor` ADD PRIMARY KEY( `USUARIO`);
ALTER TABLE `zona` ADD PRIMARY KEY( `ID_ZONA`);



-- LLAVES FORANEAS---

ALTER TABLE `administrador` ADD FOREIGN KEY (`USUARIO`) REFERENCES `persona`(`USUARIO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `administrador` ADD FOREIGN KEY (`ID_GENERO_ADMI`) REFERENCES `genero`(`ID_GENERO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `cliente` ADD FOREIGN KEY (`USUARIO`) REFERENCES `persona`(`USUARIO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `cliente` ADD FOREIGN KEY (`ADMINISTRADOR`) REFERENCES `administrador_cliente`(`CEDULA_CLIENTE`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `vendedor` ADD FOREIGN KEY (`USUARIO`) REFERENCES `persona`(`USUARIO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `vendedor` ADD FOREIGN KEY (`ID_GENERO_VENDEDOR`) REFERENCES `genero`(`ID_GENERO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `vendedor` ADD FOREIGN KEY (`ZONA_VENDEDOR`) REFERENCES `zona`(`ID_ZONA`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `persona` ADD FOREIGN KEY (`ID_ESTADO_PERSONA`) REFERENCES `estado`(`ID_ESTADO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `pedido` ADD FOREIGN KEY (`CLIENTE`) REFERENCES `cliente`(`USUARIO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `factura_venta` ADD FOREIGN KEY (`N_PEDIDO`) REFERENCES `pedido`(`N_PEDIDO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `factura_venta` ADD FOREIGN KEY (`id_estado_fact`) REFERENCES `estado_factura`(`id_estado_fac`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `factura_venta` ADD FOREIGN KEY (`id_pago_fact`) REFERENCES `forma_de_pago`(`id_pago`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `pedido_producto` ADD FOREIGN KEY (`NUMERO_PEDIDO`) REFERENCES `pedido`(`N_PEDIDO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `pedido_producto` ADD FOREIGN KEY (`COD_PRODUCTO`) REFERENCES `producto`(`CODIGO_PRODUCTO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `producto` ADD FOREIGN KEY (`ID_CATEGORIA_PROD`) REFERENCES `categoria`(`ID_CATEGORIA`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `producto` ADD FOREIGN KEY (`ID_ESTADO_PROD`) REFERENCES `estado`(`ID_ESTADO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `categoria` ADD FOREIGN KEY (`ID_ESTADO_CAT`) REFERENCES `estado`(`ID_ESTADO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `producto_factura_compra` ADD FOREIGN KEY (`CODIGO_PRODUCTO_FAC`) REFERENCES `producto`(`CODIGO_PRODUCTO`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `producto_factura_compra` ADD FOREIGN KEY (`N_FACTURA`) REFERENCES `factura_compra`(`N_FACTURA`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `factura_compra` ADD FOREIGN KEY (`FAC_NIT_PROVEEDOR`) REFERENCES `proveedor`(`NIT_PROVEEDOR`) ON DELETE RESTRICT ON UPDATE RESTRICT;


INSERT INTO  `distriandina`.`genero` (
`ID_GENERO` ,
`DESCRIPCION_GENERO`
)
VALUES (
'M',  'MASCULINO'
), (
'F',  'FEMENINO'
);

INSERT INTO  `distriandina`.`estado` (
`ID_ESTADO` ,
`DESCRIPCION`
)
VALUES (
'1',  'ACTIVO'
), (
'0',  'INACTIVO'
);


INSERT INTO  `distriandina`.`categoria` (
`ID_CATEGORIA` ,
`DESCRIPCION_CATEGORIA` ,
`ID_ESTADO_CAT`
)
VALUES (
'CT001',  'AGENDAS ESCOLARES',  '1'
), (
'CT002',  'CUADERNOS',  '1'
), (
'CT003',  'BLOCK, PAPELES',  '1'
), (
'CT004',  'CARPETERIA',  '1'
), (
'CT005',  'ESCRITURA',  '1'
), (
'CT006',  'DIBUJO Y ARTE',  '1'
), (
'CT007',  'MANUALIDADES',  '1'
), (
'CT008',  'MOCHILAS, ESTUCHES',  '1'
), (
'CT009',  'OFICINA',  '1'
)



